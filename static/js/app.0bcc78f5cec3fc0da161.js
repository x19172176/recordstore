webpackJsonp([1],{NHnr:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=r("7+uW"),n={name:"Header",created:function(){this.signedIn()},methods:{setError:function(t,e){this.error=t.response&&t.response.data&&t.response.data.error||e},signedIn:function(){return localStorage.signedIn},signOut:function(){var t=this;this.$http.secured.delete("/signin").then(function(e){delete localStorage.csrf,delete localStorage.signedIn,t.$router.replace("/")}).catch(function(e){return t.setError(e,"Cannot sign out")})}}},a={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("header",{staticClass:"bg-grey-200 py-4"},[r("div",{staticClass:"container m-auto flex flex-wrap items-center justify-end"},[r("div",{staticClass:"flex-1 flex items-center"},[r("svg",{staticClass:"fill-current text-purple-300",attrs:{viewBox:"0 0 24 24",width:"24",height:"24"}},[r("title",[t._v("record vinyl")]),r("path",{attrs:{d:"M23.938 10.773a11.915 11.915 0 0 0-2.333-5.944 12.118 12.118 0 0 0-1.12-1.314A11.962 11.962 0 0 0 12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12c0-.414-.021-.823-.062-1.227zM12 16a4 4 0 1 1 0-8 4 4 0 0 1 0 8zm0-5a1 1 0 1 0 0 2 1 1 0 0 0 0-2z"}})]),t._v(" "),r("a",{staticClass:"uppercase text-sm font-mono pl-4 font-semibold no-underline text-purple-300 hover:text-purple-600",attrs:{href:"/"}},[t._v("Record Store")])]),t._v(" "),r("div",[t.signedIn()?t._e():r("router-link",{staticClass:"link-grey-300 px-2 no-underline",attrs:{to:"/"}},[t._v("Sign in")]),t._v(" "),t.signedIn()?t._e():r("router-link",{staticClass:"link-grey-300 px-2 no-underline",attrs:{to:"/signup"}},[t._v("Sign Up")]),t._v(" "),t.signedIn()?r("router-link",{staticClass:"link-grey-300 px-2 no-underline",attrs:{to:"/records"}},[t._v("Records")]):t._e(),t._v(" "),t.signedIn()?r("router-link",{staticClass:"link-grey-300 px-2 no-underline",attrs:{to:"/artists"}},[t._v("Artists")]):t._e(),t._v(" "),t.signedIn()?r("a",{staticClass:"link-grey-300 px-2 no-underline",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.signOut(e)}}},[t._v("Sign out")]):t._e()],1)])])},staticRenderFns:[]},i={name:"App",components:{Header:r("VU/8")(n,a,!1,null,null,null).exports}},o={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("Header"),this._v(" "),e("router-view")],1)},staticRenderFns:[]},l=r("VU/8")(i,o,!1,null,null,null).exports,c=r("/ocq"),d={name:"Signin",data:function(){return{email:"",password:"",error:""}},created:function(){this.checkSignedIn()},updated:function(){this.checkSignedIn()},methods:{signin:function(){var t=this;this.$http.plain.post("/signin",{email:this.email,password:this.password}).then(function(e){return t.signinSuccessful(e)}).catch(function(e){return t.signinFailed(e)})},signinSuccessful:function(t){t.data.csrf?(localStorage.csrf=t.data.csrf,localStorage.signedIn=!0,this.error="",this.$router.replace("/records")):this.signinFailed(t)},signinFailed:function(t){this.error=t.response&&t.response.data&&t.response.data.error||"",delete localStorage.csrf,delete localStorage.signedIn},checkSignedIn:function(){localStorage.signedIn&&this.$router.replace("/records")}}},u={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"max-w-sm m-auto my-8"},[r("div",{staticClass:"border p-10 border-grey-300 shadow rounded"},[r("h3",{staticClass:"text-2xl mb-6 text-grey-900"},[t._v("Sign In")]),t._v(" "),r("form",{on:{submit:function(e){return e.preventDefault(),t.signin(e)}}},[t.error?r("div",{staticClass:"text-red"},[t._v(t._s(t.error))]):t._e(),t._v(" "),r("div",{staticClass:"mb-6"},[r("label",{staticClass:"label",attrs:{for:"email"}},[t._v("E-mail Address")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"input",attrs:{type:"email",id:"email",placeholder:"eddiestack90@gmail.com"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})]),t._v(" "),r("div",{staticClass:"mb-6"},[r("label",{staticClass:"label",attrs:{for:"password"}},[t._v("Password")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"input",attrs:{type:"password",id:"password",placeholder:"Password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),t._v(" "),r("button",{staticClass:"font-sans font-bold px-4 rounded cursor-pointer no-underline bg-green-400 hover:bg-green-800 block w-full py-4 text-white items-center justify-center",attrs:{type:"submit"}},[t._v("Sign In")]),t._v(" "),r("div",{staticClass:"my-4"},[r("router-link",{staticClass:"link-grey-200",attrs:{to:"/signup"}},[t._v("Sign up")])],1)])])])},staticRenderFns:[]},p=r("VU/8")(d,u,!1,null,null,null).exports,v={name:"Signup",data:function(){return{email:"",password:"",password_confirmation:"",error:""}},created:function(){this.checkedSignedIn()},updated:function(){this.checkedSignedIn()},methods:{signup:function(){var t=this;this.$http.plain.post("/signup",{email:this.email,password:this.password,password_confirmation:this.password_confirmation}).then(function(e){return t.signupSuccessful(e)}).catch(function(e){return t.signupFailed(e)})},signupSuccessful:function(t){t.data.csrf?(localStorage.csrf=t.data.csrf,localStorage.signedIn=!0,this.error="",this.$router.replace("/records")):this.signupFailed(t)},signupFailed:function(t){this.error=t.response&&t.response.data&&t.response.data.error||"Something went wrong",delete localStorage.csrf,delete localStorage.signedIn},checkedSignedIn:function(){localStorage.signedIn&&this.$router.replace("/records")}}},m={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"max-w-sm m-auto my-8"},[r("div",{staticClass:"border p-10 border-grey-300 shadow rounded"},[r("h3",{staticClass:"text-2xl mb-6 text-grey-900"},[t._v("Sign Up")]),t._v(" "),r("form",{on:{submit:function(e){return e.preventDefault(),t.signup(e)}}},[t.error?r("div",{staticClass:"text-red"},[t._v(t._s(t.error))]):t._e(),t._v(" "),r("div",{staticClass:"mb-6"},[r("label",{staticClass:"label",attrs:{for:"email"}},[t._v("E-mail Address")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"input",attrs:{type:"email",id:"email",placeholder:"eddiestack90@gmail.com"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})]),t._v(" "),r("div",{staticClass:"mb-6"},[r("label",{staticClass:"label",attrs:{for:"password"}},[t._v("Password")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"input",attrs:{type:"password",id:"password",placeholder:"Password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),t._v(" "),r("div",{staticClass:"mb-6"},[r("label",{staticClass:"label",attrs:{for:"password_confirmation"}},[t._v("Password Confirmation")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.password_confirmation,expression:"password_confirmation"}],staticClass:"input",attrs:{type:"password",id:"password_confirmation",placeholder:"Password Confirmation"},domProps:{value:t.password_confirmation},on:{input:function(e){e.target.composing||(t.password_confirmation=e.target.value)}}})]),t._v(" "),r("button",{staticClass:"font-sans font-bold px-4 rounded cursor-pointer no-underline bg-green-400 hover:bg-green-800 block w-full py-4 text-white items-center justify-center",attrs:{type:"submit"}},[t._v("Sign Up")]),t._v(" "),r("div",{staticClass:"my-4"},[r("router-link",{staticClass:"link-grey",attrs:{to:"/"}},[t._v("Sign In")])],1)])])])},staticRenderFns:[]},f=r("VU/8")(v,m,!1,null,null,null).exports,h={name:"Records",data:function(){return{artists:[],records:[],newRecord:[],error:"",editedRecord:""}},created:function(){var t=this;localStorage.signedIn?(this.$http.secured.get("/api/v1/records").then(function(e){t.records=e.data}).catch(function(e){return t.setError(e,"Something went wrong")}),this.$http.secured.get("/api/v1/artists").then(function(e){t.artists=e.data}).catch(function(e){return t.setError(e,"Something went wrong")})):this.$router.replace("/")},methods:{setError:function(t,e){this.error=t.response&&t.response.data&&t.response.data.error||e},getArtist:function(t){var e=this.artists.filter(function(e){return e.id===t.artist_id}),r=void 0;return e.forEach(function(t){r=t.name}),r},addRecord:function(){var t=this;this.newRecord&&this.$http.secured.post("/api/v1/records/",{record:{title:this.newRecord.title,year:this.newRecord.year,artist_id:this.newRecord.artist}}).then(function(e){t.records.push(e.data),t.newRecord=""}).catch(function(e){return t.setError(e,"Cannot create record")})},removeRecord:function(t){var e=this;this.$http.secured.delete("/api/v1/records/"+t.id).then(function(r){e.records.splice(e.records.indexOf(t),1)}).catch(function(t){return e.setError(t,"Cannot delete record")})},editRecord:function(t){this.editedRecord=t},updateRecord:function(t){var e=this;this.editedRecord="",this.$http.secured.patch("/api/v1/records/"+t.id,{record:{title:t.title,year:t.year,artist_id:t.artist}}).catch(function(t){return e.setError(t,"Cannot update record")})}}},g={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"max-w-md m-auto py-10"},[t.error?r("div",{staticClass:"text-red"},[t._v(t._s(t.error))]):t._e(),t._v(" "),r("h3",{staticClass:"font-mono font-regular text-3xl mb-4"},[t._v("Add a new record")]),t._v(" "),r("form",{on:{submit:function(e){return e.preventDefault(),t.addRecord(e)}}},[r("div",{staticClass:"mb-6"},[r("label",{staticClass:"label",attrs:{for:"record_title"}},[t._v("Title")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.newRecord.title,expression:"newRecord.title"}],staticClass:"input",attrs:{type:"text",id:"record_title",autofocus:"",autocomplete:"off",placeholder:"Type a record name"},domProps:{value:t.newRecord.title},on:{input:function(e){e.target.composing||t.$set(t.newRecord,"title",e.target.value)}}})]),t._v(" "),r("div",{staticClass:"mb-6"},[r("label",{staticClass:"label",attrs:{for:"record_year"}},[t._v("Year")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.newRecord.year,expression:"newRecord.year"}],staticClass:"input",attrs:{type:"text",id:"record_year",autofocus:"",autocomplete:"off",placeholder:"Year"},domProps:{value:t.newRecord.year},on:{input:function(e){e.target.composing||t.$set(t.newRecord,"year",e.target.value)}}})]),t._v(" "),r("div",{staticClass:"mb-6"},[r("label",{staticClass:"label",attrs:{for:"artist"}},[t._v("Artist")]),t._v(" "),r("select",{directives:[{name:"model",rawName:"v-model",value:t.newRecord.artist,expression:"newRecord.artist"}],staticClass:"select",attrs:{id:"artist"},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.newRecord,"artist",e.target.multiple?r:r[0])}}},[r("option",{attrs:{disabled:"",value:""}},[t._v("Select an artist")]),t._v(" "),t._l(t.artists,function(e){return r("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.name))])})],2),t._v(" "),r("p",{staticClass:"pt-4"},[t._v("Don't see an artist? "),r("router-link",{staticClass:"link-gray-200",attrs:{to:"/artists"}},[t._v("Create one")])],1)]),t._v(" "),r("input",{staticClass:"font-sans font-bold px-4 rounded cursor-pointer no-underline bg-green-600 hover:bg-green-dark block w-full py-4 text-white items-center justify-center",attrs:{type:"submit",value:"Add Record"}})]),t._v(" "),r("hr",{staticClass:"border border-gray-200 my-6"}),t._v(" "),r("ul",{staticClass:"list-reset mt-4"},t._l(t.records,function(e){return r("li",{key:e.id,staticClass:"py-4",attrs:{record:e}},[r("div",{staticClass:"flex items-center justify-between flex-wrap"},[r("div",{staticClass:"flex-1 flex justify-between flex-wrap pr-4"},[r("p",{staticClass:"block flex font-mono font-semibold flex items-center"},[r("svg",{staticClass:"fill-current text-indigo w-6 h-6 mr-2",attrs:{viewBox:"0 0 24 24",width:"24",height:"24"}},[r("title",[t._v("record vinyl")]),r("path",{attrs:{d:"M23.938 10.773a11.915 11.915 0 0 0-2.333-5.944 12.118 12.118 0 0 0-1.12-1.314A11.962 11.962 0 0 0 12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12c0-.414-.021-.823-.062-1.227zM12 16a4 4 0 1 1 0-8 4 4 0 0 1 0 8zm0-5a1 1 0 1 0 0 2 1 1 0 0 0 0-2z"}})]),t._v("\n          "+t._s(e.title)+" — "+t._s(e.year)+"\n        ")]),t._v(" "),r("p",{staticClass:"block font-mono font-semibold"},[t._v(t._s(t.getArtist(e)))])]),t._v(" "),r("button",{staticClass:"bg-transparent text-sm hover:bg-blue-200 hover:text-white text-blue-200 border border-blue-200 no-underline font-bold py-2 px-4 mr-2 rounded",on:{click:function(r){return r.preventDefault(),t.editRecord(e)}}},[t._v("Edit")]),t._v(" "),r("button",{staticClass:"bg-transparent text-sm hover:bg-red-200 text-red-200 hover:text-white no-underline font-bold py-2 px-4 rounded border border-red-200",on:{click:function(r){return r.preventDefault(),t.removeRecord(e)}}},[t._v("Delete")])]),t._v(" "),e==t.editedRecord?r("div",[r("form",{attrs:{action:""},on:{submit:function(r){return r.preventDefault(),t.updateRecord(e)}}},[r("div",{staticClass:"mb-6 p-4 bg-white rounded border border-gray-300 mt-4"},[r("div",{staticClass:"mb-6"},[r("label",{staticClass:"label"},[t._v("Title")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.title,expression:"record.title"}],staticClass:"input",domProps:{value:e.title},on:{input:function(r){r.target.composing||t.$set(e,"title",r.target.value)}}})]),t._v(" "),r("div",{staticClass:"mb-6"},[r("label",{staticClass:"label"},[t._v("Year")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.year,expression:"record.year"}],staticClass:"input",domProps:{value:e.year},on:{input:function(r){r.target.composing||t.$set(e,"year",r.target.value)}}})]),t._v(" "),r("div",{staticClass:"mb-6"},[r("select",{directives:[{name:"model",rawName:"v-model",value:e.artist,expression:"record.artist"}],staticClass:"select",attrs:{id:"artist_update"},on:{change:function(r){var s=Array.prototype.filter.call(r.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(e,"artist",r.target.multiple?s:s[0])}}},[r("option",{attrs:{disabled:"",value:""}},[t._v("Select an artist")]),t._v(" "),t._l(t.artists,function(e){return r("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.name))])})],2)]),t._v(" "),r("input",{staticClass:"bg-transparent text-sm hover:bg-blue-200 hover:text-white text-blue-200 border border-blue-200 no-underline font-bold py-2 px-4 mr-2 rounded",attrs:{type:"submit",value:"Update"}})])])]):t._e()])}),0)])},staticRenderFns:[]},_=r("VU/8")(h,g,!1,null,null,null).exports,b={name:"Artists",data:function(){return{artists:[],newArtist:[],error:"",editedArtist:""}},created:function(){var t=this;localStorage.signedIn?this.$http.secured.get("/api/v1/artists").then(function(e){t.artists=e.data}).catch(function(e){return t.setError(e,"Something went wrong")}):this.$router.replace("/")},methods:{setError:function(t,e){this.error=t.response&&t.response.data&&t.response.data.error||e},addArtist:function(){var t=this;this.newArtist&&this.$http.secured.post("/api/v1/artists/",{artist:{name:this.newArtist.name}}).then(function(e){t.artists.push(e.data),t.newArtist=""}).catch(function(e){return t.setError(e,"Cannot create artist")})},removeArtist:function(t){var e=this;this.$http.secured.delete("/api/v1/artists/"+t.id).then(function(r){e.artists.splice(e.artists.indexOf(t),1)}).catch(function(t){return e.setError(t,"Cannot delete artist")})},editArtist:function(t){this.editedArtist=t},updateArtist:function(t){var e=this;this.editedArtist="",this.$http.secured.patch("/api/v1/artists/"+t.id,{artist:{title:t.name}}).catch(function(t){return e.setError(t,"Cannot update artist")})}}},w={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"max-w-md m-auto py-10"},[t.error?r("div",{staticClass:"text-red"},[t._v(t._s(t.error))]):t._e(),t._v(" "),r("h3",{staticClass:"font-mono font-regular text-3xl mb-4"},[t._v("Add a new artist")]),t._v(" "),r("form",{attrs:{action:""},on:{submit:function(e){return e.preventDefault(),t.addArtist(e)}}},[r("div",{staticClass:"mb-6"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.newArtist.name,expression:"newArtist.name"}],staticClass:"input",attrs:{autofocus:"",autocomplete:"off",placeholder:"Type an arist name"},domProps:{value:t.newArtist.name},on:{input:function(e){e.target.composing||t.$set(t.newArtist,"name",e.target.value)}}})]),t._v(" "),r("input",{staticClass:"font-sans font-bold px-4 rounded cursor-pointer no-underline bg-green hover:bg-green-dark block w-full py-4 text-white items-center justify-center",attrs:{type:"submit",value:"Add Artist"}})]),t._v(" "),r("hr",{staticClass:"border border-grey-light my-6"}),t._v(" "),r("ul",{staticClass:"list-reset mt-4"},t._l(t.artists,function(e){return r("li",{key:e.id,staticClass:"py-4",attrs:{artist:e}},[r("div",{staticClass:"flex items-center justify-between flex-wrap"},[r("p",{staticClass:"block flex-1 font-mono font-semibold flex items-center "},[r("svg",{staticClass:"fill-current text-indigo w-6 h-6 mr-2",attrs:{viewBox:"0 0 20 20",width:"20",height:"20"}},[r("title",[t._v("music artist")]),r("path",{attrs:{d:"M15.75 8l-3.74-3.75a3.99 3.99 0 0 1 6.82-3.08A4 4 0 0 1 15.75 8zm-13.9 7.3l9.2-9.19 2.83 2.83-9.2 9.2-2.82-2.84zm-1.4 2.83l2.11-2.12 1.42 1.42-2.12 2.12-1.42-1.42zM10 15l2-2v7h-2v-5z"}})]),t._v("\n          "+t._s(e.name)+"\n        ")]),t._v(" "),r("button",{staticClass:"bg-tranparent text-sm hover:bg-blue hover:text-white text-blue border border-blue no-underline font-bold py-2 px-4 mr-2 rounded",on:{click:function(r){return r.preventDefault(),t.editArtist(e)}}},[t._v("Edit")]),t._v(" "),r("button",{staticClass:"bg-transprent text-sm hover:bg-red text-red hover:text-white no-underline font-bold py-2 px-4 rounded border border-red",on:{click:function(r){return r.preventDefault(),t.removeArtist(e)}}},[t._v("Delete")])]),t._v(" "),e==t.editedArtist?r("div",[r("form",{attrs:{action:""},on:{submit:function(r){return r.preventDefault(),t.updateArtist(e)}}},[r("div",{staticClass:"mb-6 p-4 bg-white rounded border border-grey-light mt-4"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"artist.name"}],staticClass:"input",domProps:{value:e.name},on:{input:function(r){r.target.composing||t.$set(e,"name",r.target.value)}}}),t._v(" "),r("input",{staticClass:" my-2 bg-transparent text-sm hover:bg-blue hover:text-white text-blue border border-blue no-underline font-bold py-2 px-4 rounded cursor-pointer",attrs:{type:"submit",value:"Update"}})])])]):t._e()])}),0)])},staticRenderFns:[]},C=r("VU/8")(b,w,!1,null,null,null).exports;s.a.use(c.a);var x=new c.a({mode:"history",routes:[{path:"/artists",name:"Artists",component:C},{path:"/records",name:"Records",component:_},{path:"/",name:"Signin",component:p},{path:"/signup",name:"Signup",component:f}]}),y=r("Rf8U"),S=r.n(y),R=r("//Fk"),k=r.n(R),A=r("Dd8w"),$=r.n(A),I=r("mtWM"),E=r.n(I),P="https://recordstore-api-eddie.herokuapp.com/",N=E.a.create({baseURL:P,withCredentials:!0,headers:{"Content-Type":"application/json"}}),F=E.a.create({baseURL:P,withCredentials:!0,headers:{"Content-Type":"application/json"}});N.interceptors.request.use(function(t){var e=t.method.toUpperCase();return"OPTIONS"!==e&&"GET"!==e&&(t.headers=$()({},t.headers,{"X-CSRF-TOKEN":localStorage.csrf})),t}),N.interceptors.response.use(null,function(t){return t.response&&t.response.config&&401===t.response.status?F.post("/refresh",{},{headers:{"X-CSRF-TOKEN":localStorage.csrf}}).then(function(e){localStorage.csrf=e.data.csrf,localStorage.signedIn=!0;var r=t.response.config;return r.headers["X-CSRF-TOKEN"]=localStorage.csrf,F.request(r)}).catch(function(t){return delete localStorage.csrf,delete localStorage.signedIn,location.replace("/"),k.a.reject(t)}):k.a.reject(t)});r("Q00M");s.a.config.productionTip=!1,s.a.use(S.a,{secured:N,plain:F}),new s.a({el:"#app",router:x,securedAxiosInstance:N,plainAxiosInstance:F,components:{App:l},template:"<App/>"})},Q00M:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.0bcc78f5cec3fc0da161.js.map